---
tags: [converter]
---

# Конвертер листингов

API Zonesmart позволяет конвертировать листинги с одного маркетплейса в другой. Это осуществляется путем конвертации через базовый листинг.

## Конвертация в базовый листинг

Для конвертации в базовый листинг потребуется лишь обратиться к конкретному листингу по API и добавить в запрос /link/, это позволит конвертировать текущий листинг в базовый, путем его "линкования".

Пример запроса для eBay:

```json http
{
  "method": "POST",
  "url": "/v1/ebay/listing/{id}/link/"
}
```

После этого у данного листинга в поле base_listing будет указан id нового созданного листинга на его основе, с которым можно будет работать дальше.

## Открепление (unlink) базового листинга

Открепить базовый листинг от интеграционного можно сделать путем аналогичного запроса как для линкования, только вместо /link/ необходимо указать /unlink/.

Пример запроса для eBay:

```json http
{
  "method": "POST",
  "url": "/v1/ebay/listing/{id}/unlink/"
}
```

После выполнения запроса у листинга поле base_listing станет None, но при этом базовый листинг не удаляется, а лишь убирается связь между ними.

## Конвертация из базового листинга в интеграционный

Конвертация из базового листинга в итеграционный осуществляется путем обращения к базовому листингу.

```json http
{
  "method": "POST",
  "url": "/v1/zonesmart/listing/{id}/convert/"
}
```

При передаче запроса необходимо указать channel_id необходимого канала продаж, для которого будет создан новый листинг, например:

```json
{
  "channel_id": "0de8d802-604d-4bd5-a139-8565d699e9f5"
}
```

В ответ на запрос будет возвращен id нового созданного листинга на основе базового.
Зная название интеграции, к которой привязан канал продаж, мы можем с легкостью открыть необходимый запрос для просмотра нового листинга, например для eBay это будет:

```json http
{
  "method": "GET",
  "url": "/v1/ebay/listing/{id}/"
}
```

## Конвертация из одного маркетплейса в другой

Так как вся конвертация осуществляется через базовый листинг, то необходимо проделать описанные ранее шаги поочереди, чтобы получить из одного листинга интеграции другой.

Соответственно порядок будет следующий:

1. Линкуем (link) текущий листинг, чтобы на его основе создался базовый.
2. Конвертируем базовый в необходимую интеграцию, путем передачи id канала продаж.

## Загрузка и выгрузка листингов c помощью файлов (фидов)

С помощью API можно загружать и выгружать листинги в формате YML (для Yandex.Market) и CSV (для всех остальных).

Далее будет описано скачивание и загрузка листингов для базовых листингов и доступных на данный момент интеграций.

### Базовый листинг

Скачивание:

```json http
{
  "method": "get",
  "url": "v1/zonesmart/listing/file_download/"
  "headers": {
    "Content-Type": "text/csv"
  }
}
```

Загрузка:

```json http
{
  "method": "post",
  "url": "v1/zonesmart/listing/file_upload/"
  "headers": {
    "Content-Type": "multipart/form-data"
  }
}
```

Пример фида базового листинга: [base_listing_feed.csv](../base_listing_feed.csv)

Фид базового листинга содержит следующую структуру:

sku |	parent_sku | title |	description |	price |	currency |	quantity | category_name |	product_code |	product_code_type |	condition |	condition_note |	brand	| main_image_url |	attribute_name_1 |	attribute_name_2 |	attribute_name_3 |	attribute_name_4 |	attribute_name_5 |	attribute_value_1 |	attribute_value_2 |	attribute_value_3 |	attribute_value_4 |	attribute_value_5 |	extra_image_url_1 |	extra_image_url_2 |	extra_image_url_3 |	extra_image_url_4 |	extra_image_url_5 |	extra_image_url_6 |	extra_image_url_7 |	extra_image_url_8 |	extra_image_url_9 |	extra_image_url_10 |	extra_image_url_11 |	extra_image_url_12 |	package_weight |	package_length |	package_height |	package_width |	package_unit_of_measure |	package_unit_of_weight
---------|----------
PRODUCT-SKU-1	| | Футболка | Простое описание футболки	|	49.9 | USD |	4 |	cloth |	978-0-8232-0299-7 |	3 |	USED |	Просто описание состояния товара | Nike |	https://picsum.photos/id/17/500/500 |	Цвет	| Размер | Ткань | | | Зеленый | XL | Хлопок | | |	https://picsum.photos/id/8/500/500 |	https://picsum.photos/id/13/500/500 |	https://picsum.photos/id/10/500/500 | | | | | | | | | | 1 |	30 | 5 |	40 |	CM | KG

#### sku

Уникальный идентификатор товара.

Тип поля: **обязательное**.

Максимальная длина - 255 символов.

#### parent_sku

Уникальный идентификатор родительского товара, который используется для обозначения нескольких вариаций одного и того же продукта.

Для использования необходимо указать у всех вариаций (из группы) одинаковый parent_sku.

Тип поля: **условное**. Поле обязательно для вариативных листингов.

#### title

Наименование продукта. Для вариативных товаров должен быть указан только у родительского товара.

Тип поля: **обязательное**.

Максимальная длина - 255 символов.

#### description

Описание продукта.

Тип поля: **обязательное**.

Максимальная длина - 500000 символов.

#### price

Цена товара.

Тип поля: **обязательное**.

Может быть как целым числом, так и числом с плавающей точкой: 10, 10.5, 10.99 и так далее.

#### currency

Валюта листинга. Следует указывать только в родительском товаре для вариативных листингов.

Допустимые коды валют: AED, AFN, ALL, AMD, ANG, AOA, ARS, AUD, AWG, AZN, BAM, BBD, BDT, BGN, BHD, BIF, BMD, BND, BOB, BRL, BSD, BTN, BWP, BYR, BZD, CAD, CDF, CHF, CLP, CNY, COP, CRC, CUP, CVE, CZK, DJF, DKK, DOP, DZD, EGP, ERN, ETB, EUR, FJD, FKP, GBP, GEL, GHS, GIP, GMD, GNF, GTQ, GYD, HKD, HNL, HRK, HTG, HUF, IDR, ILS, INR, IQD, IRR, ISK, JMD, JOD, JPY, KES, KGS, KHR, KMF, KPW, KRW, KWD, KYD, KZT, LAK, LBP, LKR, LRD, LSL, LTL, LYD, MAD, MDL, MGA, MKD, MMK, MNT, MOP, MRO, MUR, MVR, MWK, MXN, MYR, MZN, NAD, NGN, NIO, NOK, NPR, NZD, OMR, PAB, PEN, PGK, PHP, PKR, PLN, PYG, QAR, RON, RSD, RUB, RWF, SAR, SBD, SCR, SDG, SEK, SGD, SHP, SLL, SOS, SRD, STD, SYP, SZL, THB, TJS, TMT, TND, TOP, TRY, TTD, TWD, TZS, UAH, UGX, USD, UYU, UZS, VEF, VND, VUV, WST, XAF, XCD, XOF, XPF, YER, ZAR, ZMW, ZWL.

Тип поля: **необязательное**. Если currency не указан, то по стандарту будет установлена валюта RUB.

#### quantity

Количество товара в наличии.

Тип поля: **необязательное**. Если quantity не указан, то по стандарту будет установлен 0.

#### category_name

Наименование категории.

Тип поля: **необязательное**.

#### product_code

Уникальный код товара.

Тип поля: **необязательное**.

Максимальная длина - 20 символов.

#### product_code_type

Тип уникального кода товара.

Тип поля: **необязательное**.

Может принимать одно из возможных значений:

ASIN - 1.
ISBN - 2.
UPC - 3.
EAN - 4.
GCID - 5.
JAN - 6.
GTIN - 7.

#### condition

Тип состояния товара.

Тип поля: **необязательное**.

Может быть одним из следующих типов: NEW (новый), USED (Б/У), REFURBISHED (отремонтировано), OTHER (другое).

#### condition_note

Описание состояния товара.

Тип поля: **необязательное**.

Максимальная длина - 255 символов.

#### brand

Наименование бренда.

Тип поля: **необязательное**.

Максимальная длина - 255 символов.

#### main_image_url

Ссылка на основное изображение товара.

Тип поля: **необязательное**.

#### attribute_name_1...5

Наименования характеристик товара (цвет, размер, материал и так далее).

Тип поля: **необязательное**.

Максимальная длина - 255 символов.

#### attribute_value_1...5

Значения характеристик товара (зеленый, XL, хлопок и так далее).

Тип поля: **необязательное**.

Максимальная длина - 255 символов.

#### extra_image_url_1...12

Ссылки на дополнительные изображения товара.

Тип поля: **необязательное**.

#### package_weight

Вес посылки.

Тип поля: **необязательное**.

#### package_length

Длина посылки.

Тип поля: **необязательное**.

#### package_height

Высота посылки.

Тип поля: **необязательное**.

#### package_width

Ширина посылки.

Тип поля: **необязательное**.

#### package_unit_of_measure

Единица измерения габаритов посылки (длина, высота, ширина).

Тип поля: **необязательное**.

Может быть одним из следующих значений:

* IN - дюйм.
* FT - фут.
* CM - сантиметр.
* M - метр.

#### package_unit_of_weight

Единица измерения веса посылки.

Тип поля: **необязательное**.

Может быть одним из следующих значений:

* GR - грамм.
* KG - килограмм.
* LB - фунт.
* OZ - унция.
